<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyMath ‚Äî –†—É—Å—Ç—é–º–æ–≤–∞ –¢–µ—Å—Ç—ñ</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --purple: #9b59b6;
            --dark-purple: #8e44ad;
            --white: #ffffff;
            --bg-color: #f3e5f5;
            --success: #2ecc71;
            --error: #e74c3c;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--bg-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .test-container {
            background: var(--white);
            width: 100%;
            max-width: 700px;
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            border-top: 8px solid var(--purple);
            position: relative;
        }

        .header-title {
            text-align: center;
            color: var(--dark-purple);
            margin-bottom: 20px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: bold;
            color: #666;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--purple), var(--dark-purple));
            transition: width 0.4s ease;
        }

        .question-box {
            font-size: 1.3rem;
            margin-bottom: 25px;
            font-weight: 600;
            line-height: 1.6;
            min-height: 80px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 500px) {
            .options-grid { grid-template-columns: 1fr; }
        }

        .option-btn {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: 0.2s;
            font-family: inherit;
        }

        .option-btn:hover {
            border-color: var(--purple);
            background: #fdf2ff;
        }

        .option-btn.correct { background: var(--success); color: white; border-color: var(--success); }
        .option-btn.wrong { background: var(--error); color: white; border-color: var(--error); }

        .nav-btn {
            margin-top: 25px;
            width: 100%;
            padding: 15px;
            background: var(--purple);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            display: none;
        }

        .reset-btn {
            background: transparent;
            color: #999;
            border: none;
            margin-top: 15px;
            cursor: pointer;
            text-decoration: underline;
        }

        #result-screen { text-align: center; display: none; }
        .score-circle {
            width: 120px; height: 120px; border-radius: 50%;
            background: var(--purple); color: white;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-weight: bold; margin: 20px auto;
        }
    </style>
</head>
<body>

<div class="test-container">
    <div id="quiz-screen">
        <h2 class="header-title">üìö –†—É—Å—Ç—é–º–æ–≤–∞: –ü—Ä–æ—Ñ–∏–ª—å–¥—ñ–∫ –î–µ“£–≥–µ–π</h2>
        <div class="progress-header">
            <span id="question-counter">–°“±—Ä–∞“õ 1 / 40</span>
            <span id="score-counter">–ë–∞–ª–ª: 0</span>
        </div>
        <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>

        <div class="question-box" id="question-text">–ñ“Ø–∫—Ç–µ–ª—É–¥–µ...</div>
        <div class="options-grid" id="options-container"></div>

        <button class="nav-btn" id="next-btn" onclick="nextQuestion()">–ö–µ–ª–µ—Å—ñ —Å“±—Ä–∞“õ ‚ûî</button>
        <div style="text-align: center;">
            <button class="reset-btn" onclick="resetQuiz()">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
        </div>
    </div>

    <div id="result-screen">
        <h2>–¢–µ—Å—Ç –∞—è“õ—Ç–∞–ª–¥—ã!</h2>
        <div class="score-circle" id="final-score">0</div>
        <p id="motivation-text"></p>
        <button class="nav-btn" style="display:block" onclick="resetQuiz()">“ö–∞–π—Ç–∞ —Ç–∞–ø—Å—ã—Ä—É</button>
        <a href="tests.html" style="display:block; margin-top:15px; color:var(--purple); text-decoration:none;"><b>‚¨Ö –¢–µ—Å—Ç—Ç–µ—Ä–≥–µ “õ–∞–π—Ç—É</b></a>
    </div>
</div>

<script>
// --- –†–£–°–¢–Æ–ú–û–í–ê (–°–û“¢“í–´ –ë–ï–¢–¢–ï–†: –¢–£–´–ù–î–´, –ò–ù–¢–ï–ì–†–ê–õ, –°–¢–ï–†–ï–û–ú–ï–¢–†–ò–Ø) ---
const questionBank = [
    // ==========================================
    // 1. –¢–£–´–ù–î–´ (DERIVATIVE)
    // ==========================================
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ —Ç—É—ã–Ω–¥—ã—Å—ã–Ω —Ç–∞–±—ã“£—ã–∑: \\( f(x) = x^5 - 4x^3 + 2 \\)", options: ["5x^4 - 12x^2", "5x^4 - 12x", "x^4 - 12x^2", "5x^5 - 4x^3"], correct: 0 },
    { q: "\\( y = \\sin 3x \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ —Ç—É—ã–Ω–¥—ã—Å—ã:", options: ["3\\cos 3x", "\\cos 3x", "-3\\cos 3x", "3\\sin 3x"], correct: 0 },
    { q: "\\( f(x) = \\sqrt{x} \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ —Ç—É—ã–Ω–¥—ã—Å—ã:", options: ["1/(2\\sqrt{x})", "1/\\sqrt{x}", "2\\sqrt{x}", "x"], correct: 0 },
    { q: "–¢—É—ã–Ω–¥—ã–Ω—ã –µ—Å–µ–ø—Ç–µ“£—ñ–∑: \\( y = e^{2x} \\)", options: ["2e^{2x}", "e^{2x}", "e^x", "2e^x"], correct: 0 },
    { q: "\\( f(x) = \\ln(2x+1) \\) —Ç—É—ã–Ω–¥—ã—Å—ã:", options: ["2/(2x+1)", "1/(2x+1)", "2x/(2x+1)", "2\\ln(2x)"], correct: 0 },
    { q: "\\( y = x \\cdot \\sin x \\) —Ç—É—ã–Ω–¥—ã—Å—ã (–∫”©–±–µ–π—Ç—ñ–Ω–¥—ñ):", options: ["\\sin x + x\\cos x", "\\cos x", "x\\cos x", "\\sin x - x\\cos x"], correct: 0 },
    { q: "\\( y = \\frac{x}{x+1} \\) —Ç—É—ã–Ω–¥—ã—Å—ã (–±”©–ª—ñ–Ω–¥—ñ):", options: ["1/(x+1)^2", "-1/(x+1)^2", "x/(x+1)^2", "1"], correct: 0 },
    { q: "–ö“Ø—Ä–¥–µ–ª—ñ —Ñ—É–Ω–∫—Ü–∏—è —Ç—É—ã–Ω–¥—ã—Å—ã: \\( y = (3x-5)^4 \\)", options: ["12(3x-5)^3", "4(3x-5)^3", "3(3x-5)^3", "12(3x-5)"], correct: 0 },
    { q: "\\( f(x) = x^3 - 3x \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ —ç–∫—Å—Ç—Ä–µ–º—É–º –Ω“Ø–∫—Ç–µ–ª–µ—Ä—ñ:", options: ["\\pm 1", "0; 1", "1; 3", "–∂–æ“õ"], correct: 0 },
    { q: "–ñ–∞–Ω–∞–º–∞–Ω—ã“£ —Ç–µ“£–¥–µ—É—ñ–Ω –∂–∞–∑—ã“£—ã–∑: \\( f(x)=x^2 \\), \\( x_0=1 \\)", options: ["y = 2x - 1", "y = 2x + 1", "y = x + 1", "y = 2x"], correct: 0 },
    { q: "\\( y = \\cos^2 x \\) —Ç—É—ã–Ω–¥—ã—Å—ã:", options: ["-\\sin 2x", "2\\cos x", "-2\\sin x", "\\sin 2x"], correct: 0 },
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ ”©—Å—É –∞—Ä–∞–ª—ã“ì—ã–Ω —Ç–∞–±—ã“£—ã–∑: \\( f(x) = 2x^2 - 4x \\)", options: ["[1; +\\infty)", "(-‚àû; 1]", "[0; +\\infty)", "(-‚àû; 0]"], correct: 0 },
    { q: "–ù“Ø–∫—Ç–µ–Ω—ñ“£ –∂—ã–ª–¥–∞–º–¥—ã“ì—ã–Ω —Ç–∞–±—ã“£—ã–∑ \\( S(t) = t^2 + 3t \\), \\( t=2 \\) —Å.", options: ["7 –º/—Å", "5 –º/—Å", "10 –º/—Å", "3 –º/—Å"], correct: 0 },
    { q: "–ï–∫—ñ–Ω—à—ñ —Ä–µ—Ç—Ç—ñ —Ç—É—ã–Ω–¥—ã \\( f''(x) \\): \\( f(x) = x^3 \\)", options: ["6x", "3x^2", "6", "3x"], correct: 0 },
    { q: "\\( f(x) = \\text{tg } 2x \\) —Ç—É—ã–Ω–¥—ã—Å—ã:", options: ["2/\\cos^2 2x", "1/\\cos^2 2x", "2\\text{ctg } 2x", "2\\cos 2x"], correct: 0 },
    { q: "\\( f(x) = 2^x \\) —Ç—É—ã–Ω–¥—ã—Å—ã:", options: ["2^x \\ln 2", "2^x", "x 2^{x-1}", "2^x / \\ln 2"], correct: 0 },
    { q: "–ñ–∞–Ω–∞–º–∞–Ω—ã“£ –±“±—Ä—ã—à—Ç—ã“õ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ñ \\( k \\): \\( y=x^2-3x \\), \\( x_0=2 \\)", options: ["1", "2", "-1", "0"], correct: 0 },
    { q: "\\( y = 1/x \\) —Ç—É—ã–Ω–¥—ã—Å—ã:", options: ["-1/x^2", "1/x^2", "\\ln x", "-x"], correct: 0 },
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ —Å—ã–Ω–¥—ã“õ –Ω“Ø–∫—Ç–µ–ª–µ—Ä—ñ: \\( y = x^3 - 3x^2 \\)", options: ["0; 2", "0; 3", "1; 2", "0; -2"], correct: 0 },
    { q: "\\( f(x) = \\log_3 x \\) —Ç—É—ã–Ω–¥—ã—Å—ã:", options: ["1/(x \\ln 3)", "1/x", "\\ln 3 / x", "3^x"], correct: 0 },

    // ==========================================
    // 2. –ê–õ“í–ê–®“ö–´ –§–£–ù–ö–¶–ò–Ø –ñ”ò–ù–ï –ò–ù–¢–ï–ì–†–ê–õ
    // ==========================================
    { q: "\\( \\int x^4 dx \\) –µ—Å–µ–ø—Ç–µ“£—ñ–∑:", options: ["x^5/5 + C", "4x^3 + C", "x^5 + C", "5x^5 + C"], correct: 0 },
    { q: "\\( \\int \\sin x dx \\) –µ—Å–µ–ø—Ç–µ“£—ñ–∑:", options: ["-\\cos x + C", "\\cos x + C", "\\sin x + C", "-\\sin x"], correct: 0 },
    { q: "\\( \\int e^{2x} dx \\) –µ—Å–µ–ø—Ç–µ“£—ñ–∑:", options: ["0.5 e^{2x} + C", "2e^{2x} + C", "e^{2x} + C", "e^x + C"], correct: 0 },
    { q: "–ê–Ω—ã“õ—Ç–∞–ª“ì–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞–ª: \\( \\int_0^1 x^2 dx \\)", options: ["1/3", "1/2", "1", "3"], correct: 0 },
    { q: "–ê–Ω—ã“õ—Ç–∞–ª“ì–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞–ª: \\( \\int_0^{\\pi} \\sin x dx \\)", options: ["2", "0", "1", "-2"], correct: 0 },
    { q: "\\( \\int \\frac{1}{x} dx \\) –µ—Å–µ–ø—Ç–µ“£—ñ–∑:", options: ["\\ln|x| + C", "-1/x^2", "x + C", "e^x"], correct: 0 },
    { q: "\\( \\int (2x + 1) dx \\) –µ—Å–µ–ø—Ç–µ“£—ñ–∑:", options: ["x^2 + x + C", "2x^2 + C", "x^2 + C", "2"], correct: 0 },
    { q: "“ö–∏—Å—ã“õ —Å—ã–∑—ã“õ—Ç—ã —Ç—Ä–∞–ø–µ—Ü–∏—è–Ω—ã“£ –∞—É–¥–∞–Ω—ã: \\( y=x^2, y=0, x=1, x=2 \\)", options: ["7/3", "1/3", "2", "3"], correct: 0 },
    { q: "\\( \\int \\frac{1}{\\cos^2 x} dx \\) –µ—Å–µ–ø—Ç–µ“£—ñ–∑:", options: ["\\text{tg } x + C", "-\\text{ctg } x", "\\cos x", "\\sin x"], correct: 0 },
    { q: "\\( \\int_1^2 3x^2 dx \\)", options: ["7", "8", "6", "9"], correct: 0 },
    { q: "\\( F(x) \\) —Ç–∞–±—ã“£—ã–∑, –µ–≥–µ—Ä \\( f(x)=4x^3 \\)", options: ["x^4 + C", "12x^2", "x^3", "4x^4"], correct: 0 },
    { q: "\\( \\int \\sqrt{x} dx \\) –µ—Å–µ–ø—Ç–µ“£—ñ–∑:", options: ["\\frac{2}{3}x^{3/2} + C", "\\frac{1}{2\\sqrt{x}}", "x^{3/2}", "2\\sqrt{x}"], correct: 0 },
    { q: "\\( \\int 5 dx \\) –µ—Å–µ–ø—Ç–µ“£—ñ–∑:", options: ["5x + C", "0", "5", "x+5"], correct: 0 },
    { q: "–ù—å—é—Ç–æ–Ω-–õ–µ–π–±–Ω–∏—Ü —Ñ–æ—Ä–º—É–ª–∞—Å—ã:", options: ["F(b) - F(a)", "F(a) - F(b)", "f(b) - f(a)", "F(b) + F(a)"], correct: 0 },
    { q: "\\( \\int_0^1 e^x dx \\)", options: ["e - 1", "e", "1", "e + 1"], correct: 0 },
    { q: "\\( \\int \\frac{dx}{x+2} \\)", options: ["\\ln|x+2| + C", "\\ln|x| + 2", "-1/(x+2)^2", "x+2"], correct: 0 },
    { q: "\\( \\int \\cos 3x dx \\)", options: ["\\frac{1}{3}\\sin 3x + C", "3\\sin 3x", "\\sin 3x", "-\\sin 3x"], correct: 0 },
    { q: "–ê–Ω—ã“õ—Ç–∞–ª“ì–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞–ª: \\( \\int_{-1}^1 x^3 dx \\)", options: ["0", "2", "1/4", "-2"], correct: 0 },
    { q: "\\( \\int (x^2 - x) dx \\)", options: ["x^3/3 - x^2/2 + C", "2x - 1", "x^3 - x^2", "x^2/2 - x"], correct: 0 },
    { q: "“ö–∏—Å—ã“õ —Å—ã–∑—ã“õ—Ç—ã —Ç—Ä–∞–ø–µ—Ü–∏—è–Ω—ã“£ –∞—É–¥–∞–Ω—ã S = ?", options: ["\\int_a^b f(x) dx", "f(b)-f(a)", "f'(x)", "ab"], correct: 0 },

    // ==========================================
    // 3. –°–¢–ï–†–ï–û–ú–ï–¢–†–ò–Ø (–ö”®–õ–ï–ú–î–ï–† –ú–ï–ù –ë–ï–¢–¢–ï–†)
    // ==========================================
    { q: "–ö—É–±—Ç—ã“£ “õ—ã—Ä—ã 3 —Å–º. –ö”©–ª–µ–º—ñ–Ω —Ç–∞–±—ã“£—ã–∑:", options: ["27", "9", "54", "36"], correct: 0 },
    { q: "–ö—É–±—Ç—ã“£ “õ—ã—Ä—ã 2 —Å–º. –¢–æ–ª—ã“õ –±–µ—Ç—ñ–Ω—ñ“£ –∞—É–¥–∞–Ω—ã:", options: ["24", "8", "16", "12"], correct: 0 },
    { q: "–¢—ñ–∫ –±“±—Ä—ã—à—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª–µ–ø–∏–ø–µ–¥: 2, 3, 4. –ö”©–ª–µ–º—ñ?", options: ["24", "12", "9", "20"], correct: 0 },
    { q: "–®–∞—Ä–¥—ã“£ —Ä–∞–¥–∏—É—Å—ã 3 —Å–º. –ö”©–ª–µ–º—ñ?", options: ["36\\pi", "12\\pi", "108\\pi", "9\\pi"], correct: 0 },
    { q: "–®–∞—Ä–¥—ã“£ –±–µ—Ç—ñ–Ω—ñ“£ –∞—É–¥–∞–Ω—ã (R=2):", options: ["16\\pi", "8\\pi", "4\\pi", "12\\pi"], correct: 0 },
    { q: "–¶–∏–ª–∏–Ω–¥—Ä: R=2, h=5. –ö”©–ª–µ–º—ñ?", options: ["20\\pi", "10\\pi", "40\\pi", "25\\pi"], correct: 0 },
    { q: "–¶–∏–ª–∏–Ω–¥—Ä–¥—ñ“£ –±“Ø–π—ñ—Ä –±–µ—Ç—ñ–Ω—ñ“£ –∞—É–¥–∞–Ω—ã: R=3, h=4.", options: ["24\\pi", "12\\pi", "48\\pi", "6\\pi"], correct: 0 },
    { q: "–ö–æ–Ω—É—Å: R=3, h=4. –ñ–∞—Å–∞—É—à—ã—Å—ã (l)?", options: ["5", "6", "7", "\\sqrt{7}"], correct: 0 },
    { q: "–ö–æ–Ω—É—Å—Ç—ã“£ –∫”©–ª–µ–º—ñ: R=3, h=4.", options: ["12\\pi", "36\\pi", "16\\pi", "24\\pi"], correct: 0 },
    { q: "–î“±—Ä—ã—Å —Ç”©—Ä—Ç–±“±—Ä—ã—à—Ç—ã –ø–∏—Ä–∞–º–∏–¥–∞–Ω—ã“£ —Ç–∞–±–∞–Ω “õ–∞–±—ã—Ä“ì–∞—Å—ã 6, –±–∏—ñ–∫—Ç—ñ–≥—ñ 4. –ö”©–ª–µ–º—ñ?", options: ["48", "144", "36", "72"], correct: 0 },
    { q: "–ö—É–±—Ç—ã“£ –¥–∏–∞–≥–æ–Ω–∞–ª—ñ \\( d = a\\sqrt{3} \\). –ï–≥–µ—Ä a=2 –±–æ–ª—Å–∞:", options: ["2\\sqrt{3}", "4", "2", "3\\sqrt{2}"], correct: 0 },
    { q: "–ü—Ä–∏–∑–º–∞–Ω—ã“£ –∫”©–ª–µ–º—ñ V = ?", options: ["S_{—Ç–∞–±} \\cdot h", "1/3 S_{—Ç–∞–±} h", "S_{—Ç–∞–±} \\cdot l", "P \\cdot h"], correct: 0 },
    { q: "–ü–∏—Ä–∞–º–∏–¥–∞–Ω—ã“£ –∫”©–ª–µ–º—ñ V = ?", options: ["1/3 S_{—Ç–∞–±} \\cdot h", "S_{—Ç–∞–±} \\cdot h", "1/2 S_{—Ç–∞–±} h", "P \\cdot h"], correct: 0 },
    { q: "–®–∞—Ä –∫”©–ª–µ–º—ñ–Ω—ñ“£ —Ñ–æ—Ä–º—É–ª–∞—Å—ã:", options: ["4/3 \\pi R^3", "4\\pi R^2", "\\pi R^2 h", "1/3 \\pi R^3"], correct: 0 },
    { q: "–ö–æ–Ω—É—Å—Ç—ã“£ —Ç–æ–ª—ã“õ –±–µ—Ç—ñ:", options: ["\\pi R(l+R)", "\\pi Rl", "\\pi R^2", "2\\pi R(l+R)"], correct: 0 },
    { q: "–¢—ñ–∫ –±“±—Ä—ã—à—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª–µ–ø–∏–ø–µ–¥—Ç—ñ“£ –¥–∏–∞–≥–æ–Ω–∞–ª—ñ (2, 2, 1):", options: ["3", "4", "5", "\\sqrt{5}"], correct: 0 },
    { q: "–¶–∏–ª–∏–Ω–¥—Ä–¥—ñ“£ –æ—Å—å—Ç—ñ–∫ “õ–∏–º–∞—Å—ã - –∫–≤–∞–¥—Ä–∞—Ç, “õ–∞–±—ã—Ä“ì–∞—Å—ã 4. –¶–∏–ª–∏–Ω–¥—Ä –∫”©–ª–µ–º—ñ?", options: ["16\\pi", "32\\pi", "8\\pi", "4\\pi"], correct: 0 },
    { q: "“ö–∏—ã“õ –∫–æ–Ω—É—Å –∫”©–ª–µ–º—ñ–Ω—ñ“£ —Ñ–æ—Ä–º—É–ª–∞—Å—ã–Ω–¥–∞ –Ω–µ –±–∞—Ä?", options: ["R^2 + Rr + r^2", "R+r", "R-r", "Rr"], correct: 0 },
    { q: "–î“±—Ä—ã—Å —Ç–µ—Ç—Ä–∞—ç–¥—Ä–¥—ñ“£ “õ—ã—Ä—ã 1-–≥–µ —Ç–µ“£. –¢–æ–ª—ã“õ –±–µ—Ç—ñ?", options: ["\\sqrt{3}", "1", "\\sqrt{2}", "2"], correct: 0 },
    { q: "–°—Ñ–µ—Ä–∞–Ω—ã“£ —Ç–µ“£–¥–µ—É—ñ: \\( x^2+y^2+z^2=25 \\). –†–∞–¥–∏—É—Å?", options: ["5", "25", "10", "1"], correct: 0 },
    { q: "–í–µ–∫—Ç–æ—Ä–¥—ã“£ “±–∑—ã–Ω–¥—ã“ì—ã: \\( \\vec{a}(1; 2; 2) \\)", options: ["3", "\\sqrt{5}", "9", "5"], correct: 0 },
    { q: "–ï–∫—ñ –≤–µ–∫—Ç–æ—Ä–¥—ã“£ —Å–∫–∞–ª—è—Ä –∫”©–±–µ–π—Ç—ñ–Ω–¥—ñ—Å—ñ: \\( \\vec{a}(1;2), \\vec{b}(3;4) \\)", options: ["11", "10", "7", "5"], correct: 0 },
    { q: "–ü–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä –≤–µ–∫—Ç–æ—Ä–ª–∞—Ä–¥—ã“£ —Å–∫–∞–ª—è—Ä –∫”©–±–µ–π—Ç—ñ–Ω–¥—ñ—Å—ñ:", options: ["0", "1", "-1", "ab"], correct: 0 },
    { q: "–ö–µ—Å—ñ–Ω–¥—ñ –æ—Ä—Ç–∞—Å—ã: A(0;0), B(4;6).", options: ["(2; 3)", "(4; 6)", "(2; 2)", "(3; 3)"], correct: 0 },
    { q: "–ù“Ø–∫—Ç–µ–ª–µ—Ä –∞—Ä–∞“õ–∞—à—ã“õ—Ç—ã“ì—ã: A(1;1), B(4;5).", options: ["5", "4", "3", "7"], correct: 0 },

    // ==========================================
    // 4. –¢–†–ò–ì–û–ù–û–ú–ï–¢–†–ò–Ø –ñ”ò–ù–ï –¢–ï“¢–î–ï–£–õ–ï–† (–°–û“¢“í–´ –ë”®–õ–Ü–ú)
    // ==========================================
    { q: "–¢–µ“£–¥–µ—É–¥—ñ —à–µ—à—ñ“£—ñ–∑: \\( \\sin x = 1/2 \\)", options: ["(-1)^k \\pi/6 + \\pi k", "\\pi/3 + 2\\pi k", "\\pi/6 + 2\\pi k", "\\pm \\pi/6 + 2\\pi k"], correct: 0 },
    { q: "–¢–µ“£–¥–µ—É–¥—ñ —à–µ—à—ñ“£—ñ–∑: \\( \\cos x = 0 \\)", options: ["\\pi/2 + \\pi k", "\\pi k", "2\\pi k", "\\pi/2 + 2\\pi k"], correct: 0 },
    { q: "–¢–µ“£–¥–µ—É–¥—ñ —à–µ—à—ñ“£—ñ–∑: \\( \\text{tg } x = 1 \\)", options: ["\\pi/4 + \\pi k", "\\pi/4 + 2\\pi k", "-\\pi/4 + \\pi k", "\\pi k"], correct: 0 },
    { q: "–´“õ—à–∞–º–¥–∞“£—ã–∑: \\( 1 - \\sin^2 \\alpha \\)", options: ["\\cos^2 \\alpha", "\\sin^2 \\alpha", "1", "\\text{tg}^2 \\alpha"], correct: 0 },
    { q: "–ù–µ–≥—ñ–∑–≥—ñ —Ç–µ–ø–µ-—Ç–µ“£–¥—ñ–∫: \\( \\sin^2 x + \\cos^2 x = ? \\)", options: ["1", "0", "-1", "2"], correct: 0 },
    { q: "–ï—Å–µ–ø—Ç–µ“£—ñ–∑: \\( \\sin 30^\\circ + \\cos 60^\\circ \\)", options: ["1", "\\sqrt{3}", "0.5", "0"], correct: 0 },
    { q: "–ö–µ–ª—Ç—ñ—Ä—É —Ñ–æ—Ä–º—É–ª–∞—Å—ã: \\( \\sin(\\pi/2 + \\alpha) \\)", options: ["\\cos \\alpha", "-\\cos \\alpha", "\\sin \\alpha", "-\\sin \\alpha"], correct: 0 },
    { q: "“ö–æ—Å –±“±—Ä—ã—à: \\( \\sin 2\\alpha \\)", options: ["2\\sin\\alpha\\cos\\alpha", "\\cos^2\\alpha - \\sin^2\\alpha", "2\\sin\\alpha", "2\\cos\\alpha"], correct: 0 },
    { q: "–¢–µ“£–¥–µ—É–¥—ñ —à–µ—à—ñ“£—ñ–∑: \\( 2\\cos x = \\sqrt{3} \\)", options: ["\\pm \\pi/6 + 2\\pi k", "\\pm \\pi/3 + 2\\pi k", "\\pi/6 + \\pi k", "\\pi/3"], correct: 0 },
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ –ø–µ—Ä–∏–æ–¥—ã: \\( y = \\sin x \\)", options: ["2\\pi", "\\pi", "\\pi/2", "4\\pi"], correct: 0 },
    { q: "–ö”©—Ä—Å–µ—Ç–∫—ñ—à—Ç—ñ–∫ —Ç–µ“£–¥–µ—É: \\( 3^x = 81 \\)", options: ["4", "3", "5", "2"], correct: 0 },
    { q: "–õ–æ–≥–∞—Ä–∏—Ñ–º–¥—ñ–∫ —Ç–µ“£—Å—ñ–∑–¥—ñ–∫: \\( \\log_2 x > 3 \\)", options: ["(8; +\\infty)", "(3; +\\infty)", "(-‚àû; 8)", "[8; +\\infty)"], correct: 0 },
    { q: "–ò—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª —Ç–µ“£—Å—ñ–∑–¥—ñ–∫: \\( \\sqrt{x} < 3 \\)", options: ["[0; 9)", "(0; 9)", "(-‚àû; 9)", "x < 9"], correct: 0 },
    { q: "–ú–æ–¥—É–ª—å —Ç–µ“£—Å—ñ–∑–¥—ñ–∫: \\( |x| < 5 \\)", options: ["(-5; 5)", "(-‚àû; 5)", "(0; 5)", "[-5; 5]"], correct: 0 },
    { q: "–¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è–ª—ã“õ —Ç–µ“£—Å—ñ–∑–¥—ñ–∫: \\( \\sin x > 0 \\)", options: ["(2\\pi k; \\pi + 2\\pi k)", "(\\pi k; 2\\pi k)", "(0; \\pi)", "R"], correct: 0 },
    { q: "–ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞–ª—ã“õ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—è: 2, 5, 8... \\( a_{10} \\)?", options: ["29", "27", "30", "32"], correct: 0 },
    { q: "–ì–µ–æ–º–µ—Ç—Ä–∏—è–ª—ã“õ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—è: 2, 6, 18... \\( S_4 \\)?", options: ["80", "78", "82", "26"], correct: 0 },
    { q: "–®–µ–∫—Å—ñ–∑ –∫–µ–º—ñ–º–µ–ª—ñ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—è “õ–æ—Å—ã–Ω–¥—ã—Å—ã: 1, 1/2, 1/4...", options: ["2", "1.5", "3", "1"], correct: 0 },
    { q: "–ë–∏–Ω–æ–º–¥—ã“õ –∂—ñ–∫—Ç–µ—É: \\( (a+b)^2 \\)", options: ["a^2+2ab+b^2", "a^2+b^2", "a^2-2ab+b^2", "a+b"], correct: 0 },
    { q: "–´“õ—Ç–∏–º–∞–ª–¥—ã“õ: –û–π—ã–Ω —Å“Ø–π–µ–≥—ñ–Ω —Ç–∞—Å—Ç–∞“ì–∞–Ω–¥–∞ 6 —Ç“Ø—Å—É—ñ:", options: ["1/6", "1/2", "1/3", "5/6"], correct: 0 },

    // ==========================================
    // 5. –ú”ò–¢–Ü–ù–î–Ü–ö –ñ”ò–ù–ï “ö–û–†–´–¢–´–ù–î–´ –ï–°–ï–ü–¢–ï–† (–°–û“¢–´)
    // ==========================================
    { q: "–ê—Ä–∞–ª–∞—Å–ø–∞: 200–≥ 10%-–¥—ã“õ –µ—Ä—ñ—Ç—ñ–Ω–¥—ñ–¥–µ “õ–∞–Ω—à–∞ —Ç“±–∑ –±–∞—Ä?", options: ["20–≥", "10–≥", "30–≥", "200–≥"], correct: 0 },
    { q: "–ñ—ã–ª–¥–∞–º–¥—ã“õ: 120 –∫–º –∂–æ–ª–¥—ã 2 —Å–∞“ì–∞—Ç—Ç–∞ –∂“Ø—Ä—Å–µ, V=?", options: ["60 –∫–º/—Å–∞“ì", "50 –∫–º/—Å–∞“ì", "70 –∫–º/—Å–∞“ì", "100 –∫–º/—Å–∞“ì"], correct: 0 },
    { q: "–ñ“±–º—ã—Å: 1-—à—ñ “õ“±–±—ã—Ä 3 —Å–∞“ì, 2-—à—ñ “õ“±–±—ã—Ä 6 —Å–∞“ì —Ç–æ–ª—Ç—ã—Ä–∞–¥—ã. –ë—ñ—Ä–≥–µ?", options: ["2 —Å–∞“ì", "4.5 —Å–∞“ì", "3 —Å–∞“ì", "9 —Å–∞“ì"], correct: 0 },
    { q: "–ü–∞–π—ã–∑: –ë–∞“ì–∞—Å—ã 1000 —Ç–≥, 20% –∞—Ä–∑–∞–Ω–¥–∞–¥—ã. –ñ–∞“£–∞ –±–∞“ì–∞?", options: ["800", "820", "1200", "900"], correct: 0 },
    { q: "–°–∞–Ω–¥–∞—Ä: –ï–∫—ñ —Å–∞–Ω–Ω—ã“£ “õ–æ—Å—ã–Ω–¥—ã—Å—ã 10, –∫”©–±–µ–π—Ç—ñ–Ω–¥—ñ—Å—ñ 21.", options: ["3 –∂”ô–Ω–µ 7", "4 –∂”ô–Ω–µ 6", "2 –∂”ô–Ω–µ 8", "5 –∂”ô–Ω–µ 5"], correct: 0 },
    { q: "–ú–æ—Ç–æ—Ä–ª—ã “õ–∞–π—ã“õ –∞“ì—ã—Å–ø–µ–Ω 20 –∫–º/—Å–∞“ì, –∞“ì—ã—Å“õ–∞ “õ–∞—Ä—Å—ã 16 –∫–º/—Å–∞“ì. –ê“ì—ã—Å –∂—ã–ª–¥–∞–º–¥—ã“ì—ã?", options: ["2 –∫–º/—Å–∞“ì", "4 –∫–º/—Å–∞“ì", "18 –∫–º/—Å–∞“ì", "1 –∫–º/—Å–∞“ì"], correct: 0 },
    { q: "–ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∏–∫–∞: 5 –∞–¥–∞–º–¥—ã –Ω–µ—à–µ —Ç”ô—Å—ñ–ª–º–µ–Ω –∫–µ–∑–µ–∫–∫–µ —Ç“±—Ä“ì—ã–∑—É“ì–∞ –±–æ–ª–∞–¥—ã?", options: ["120", "25", "5", "100"], correct: 0 },
    { q: "–¢–µ—Ä—É: \\( C_5^2 \\) –µ—Å–µ–ø—Ç–µ“£—ñ–∑:", options: ["10", "20", "5", "12"], correct: 0 },
    { q: "–ê–ª–º–∞—Å—Ç—ã—Ä—É: \\( P_4 \\) –µ—Å–µ–ø—Ç–µ“£—ñ–∑:", options: ["24", "12", "16", "4"], correct: 0 },
    { q: "–õ–æ–≥–∏–∫–∞: 1, 4, 9, 16, ? –ö–µ–ª–µ—Å—ñ —Å–∞–Ω:", options: ["25", "20", "24", "30"], correct: 0 },
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ “Ø–∑—ñ–ª—ñ—Å –Ω“Ø–∫—Ç–µ—Å—ñ: \\( y = 1/(x-2) \\)", options: ["2", "0", "1", "–∂–æ“õ"], correct: 0 },
    { q: "–ê—Å–∏–º–ø—Ç–æ—Ç–∞: \\( y = 1/x \\) –∫”©–ª–¥–µ–Ω–µ“£ –∞—Å–∏–º–ø—Ç–æ—Ç–∞—Å—ã:", options: ["y=0", "x=0", "y=1", "y=x"], correct: 0 },
    { q: "–ü–∞—Ä–∞–±–æ–ª–∞ —Ç”©–±–µ—Å—ñ: \\( y = x^2 - 2x + 1 \\)", options: ["(1; 0)", "(0; 1)", "(1; 1)", "(-1; 0)"], correct: 0 },
    { q: "–®–µ“£–±–µ—Ä —Ç–µ“£–¥–µ—É—ñ: —Ü–µ–Ω—Ç—Ä—ñ (0;0), R=5.", options: ["x^2 + y^2 = 25", "x^2 + y^2 = 5", "x+y=5", "x^2 - y^2 = 25"], correct: 0 },
    { q: "–°–æ“£“ì—ã —Å“±—Ä–∞“õ: \\( \\sin^2 x + \\cos^2 x + \\text{tg } x \\cdot \\text{ctg } x \\)", options: ["2", "1", "0", "3"], correct: 0 }
];

// --- –õ–û–ì–ò–ö–ê ---
let currentQuestions = [];
let currentIndex = 0;
let score = 0;
let selectedOption = null;

const STORAGE_KEY_QUESTIONS = 'rustyumova_questions';
const STORAGE_KEY_INDEX = 'rustyumova_index';
const STORAGE_KEY_SCORE = 'rustyumova_score';

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function initQuiz() {
    const savedQuestions = localStorage.getItem(STORAGE_KEY_QUESTIONS);
    const savedIndex = localStorage.getItem(STORAGE_KEY_INDEX);
    const savedScore = localStorage.getItem(STORAGE_KEY_SCORE);

    if (savedQuestions && savedIndex !== null) {
        currentQuestions = JSON.parse(savedQuestions);
        currentIndex = parseInt(savedIndex);
        score = parseInt(savedScore || 0);
        if (currentIndex >= currentQuestions.length) startNewQuiz();
        else renderQuestion();
    } else {
        startNewQuiz();
    }
}

function startNewQuiz() {
    // 40 —Å“±—Ä–∞“õ—Ç—ã –∫–µ–∑–¥–µ–π—Å–æ“õ —Ç–∞“£–¥–∞–ø –∞–ª—É (100-–¥—ñ“£ —ñ—à—ñ–Ω–µ–Ω)
    const shuffledRaw = shuffleArray([...questionBank]);
    const selected = shuffledRaw.slice(0, 40);

    currentQuestions = selected.map(q => {
        const correctAnswerText = q.options[q.correct];
        const shuffledOptions = shuffleArray([...q.options]);
        const newCorrectIndex = shuffledOptions.indexOf(correctAnswerText);
        return { q: q.q, options: shuffledOptions, correct: newCorrectIndex };
    });

    currentIndex = 0;
    score = 0;
    saveProgress();
    renderQuestion();
}

function saveProgress() {
    localStorage.setItem(STORAGE_KEY_QUESTIONS, JSON.stringify(currentQuestions));
    localStorage.setItem(STORAGE_KEY_INDEX, currentIndex);
    localStorage.setItem(STORAGE_KEY_SCORE, score);
}

function renderQuestion() {
    const q = currentQuestions[currentIndex];
    const total = currentQuestions.length;

    document.getElementById('question-counter').innerText = `–°“±—Ä–∞“õ ${currentIndex + 1} / ${total}`;
    document.getElementById('score-counter').innerText = `–ë–∞–ª–ª: ${score}`;
    document.getElementById('progress-fill').style.width = `${((currentIndex) / total) * 100}%`;
    document.getElementById('question-text').innerHTML = q.q;

    const container = document.getElementById('options-container');
    container.innerHTML = '';
    
    q.options.forEach((opt, idx) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerHTML = `\\(${opt}\\)`;
        btn.onclick = () => selectAnswer(btn, idx);
        container.appendChild(btn);
    });

    document.getElementById('next-btn').style.display = 'none';
    selectedOption = null;
    MathJax.typeset();
}

function selectAnswer(btn, index) {
    if (selectedOption !== null) return;
    selectedOption = index;

    const q = currentQuestions[currentIndex];
    const buttons = document.querySelectorAll('.option-btn');

    if (index === q.correct) {
        btn.classList.add('correct');
        score++;
    } else {
        btn.classList.add('wrong');
        buttons[q.correct].classList.add('correct');
    }

    saveProgress();
    document.getElementById('next-btn').style.display = 'block';
}

function nextQuestion() {
    currentIndex++;
    if (currentIndex < currentQuestions.length) {
        saveProgress();
        renderQuestion();
    } else {
        finishQuiz();
    }
}

function finishQuiz() {
    document.getElementById('quiz-screen').style.display = 'none';
    const resScreen = document.getElementById('result-screen');
    resScreen.style.display = 'block';
    
    document.getElementById('final-score').innerText = `${score} / ${currentQuestions.length}`;
    
    let msg = "";
    const percentage = (score / currentQuestions.length) * 100;
    if (percentage >= 90) msg = "üèÜ –ö–µ—Ä–µ–º–µ—Ç! –ù–∞“ì—ã–∑ –ü—Ä–æ—Ñ–∏!";
    else if (percentage >= 70) msg = "üî• –ñ–∞“õ—Å—ã –Ω”ô—Ç–∏–∂–µ!";
    else msg = "üìö –ö”©–±—ñ—Ä–µ–∫ –¥–∞–π—ã–Ω–¥–∞–ª—É –∫–µ—Ä–µ–∫.";
    
    document.getElementById('motivation-text').innerText = msg;
    
    localStorage.removeItem(STORAGE_KEY_QUESTIONS);
    localStorage.removeItem(STORAGE_KEY_INDEX);
    localStorage.removeItem(STORAGE_KEY_SCORE);
}

function resetQuiz() {
    localStorage.removeItem(STORAGE_KEY_QUESTIONS);
    localStorage.removeItem(STORAGE_KEY_INDEX);
    localStorage.removeItem(STORAGE_KEY_SCORE);
    
    document.getElementById('result-screen').style.display = 'none';
    document.getElementById('quiz-screen').style.display = 'block';
    startNewQuiz();
}

window.onload = initQuiz;
</script>

</body>
</html>