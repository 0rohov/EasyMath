<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyMath ‚Äî –§—É–Ω–∫—Ü–∏—è–ª–∞—Ä</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --blue: #2980b9; /* –§—É–Ω–∫—Ü–∏—è–ª–∞—Ä“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∫”©–∫ —Ç“Ø—Å */
            --light-blue: #3498db;
            --white: #ffffff;
            --bg-color: #f4f7f6;
            --success: #2ecc71;
            --error: #e74c3c;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--bg-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .test-container {
            background: var(--white);
            width: 100%;
            max-width: 700px;
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            border-top: 8px solid var(--blue);
            position: relative;
        }

        .header-title {
            text-align: center;
            color: var(--blue);
            margin-bottom: 20px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: bold;
            color: #666;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--blue), var(--light-blue));
            transition: width 0.4s ease;
        }

        .question-box {
            font-size: 1.3rem;
            margin-bottom: 25px;
            font-weight: 600;
            line-height: 1.6;
            min-height: 80px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 500px) {
            .options-grid { grid-template-columns: 1fr; }
        }

        .option-btn {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: 0.2s;
            font-family: inherit;
        }

        .option-btn:hover {
            border-color: var(--blue);
            background: #eaf6fc;
        }

        .option-btn.correct { background: var(--success); color: white; border-color: var(--success); }
        .option-btn.wrong { background: var(--error); color: white; border-color: var(--error); }

        .nav-btn {
            margin-top: 25px;
            width: 100%;
            padding: 15px;
            background: var(--blue);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            display: none;
        }

        .reset-btn {
            background: transparent;
            color: #999;
            border: none;
            margin-top: 15px;
            cursor: pointer;
            text-decoration: underline;
        }

        #result-screen { text-align: center; display: none; }
        .score-circle {
            width: 120px; height: 120px; border-radius: 50%;
            background: var(--blue); color: white;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-weight: bold; margin: 20px auto;
        }
    </style>
</head>
<body>

<div class="test-container">
    <div id="quiz-screen">
        <h2 class="header-title">üìà –§—É–Ω–∫—Ü–∏—è–ª–∞—Ä –∂”ô–Ω–µ –ì—Ä–∞—Ñ–∏–∫—Ç–µ—Ä</h2>
        <div class="progress-header">
            <span id="question-counter">–°“±—Ä–∞“õ 1 / 20</span>
            <span id="score-counter">–ë–∞–ª–ª: 0</span>
        </div>
        <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>

        <div class="question-box" id="question-text">–ñ“Ø–∫—Ç–µ–ª—É–¥–µ...</div>
        <div class="options-grid" id="options-container"></div>

        <button class="nav-btn" id="next-btn" onclick="nextQuestion()">–ö–µ–ª–µ—Å—ñ —Å“±—Ä–∞“õ ‚ûî</button>
        <div style="text-align: center;">
            <button class="reset-btn" onclick="resetQuiz()">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
        </div>
    </div>

    <div id="result-screen">
        <h2>–¢–µ—Å—Ç –∞—è“õ—Ç–∞–ª–¥—ã!</h2>
        <div class="score-circle" id="final-score">0</div>
        <p id="motivation-text"></p>
        <button class="nav-btn" style="display:block" onclick="resetQuiz()">“ö–∞–π—Ç–∞ —Ç–∞–ø—Å—ã—Ä—É</button>
        <a href="tests.html" style="display:block; margin-top:15px; color:var(--blue); text-decoration:none;"><b>‚¨Ö –¢–µ—Å—Ç—Ç–µ—Ä–≥–µ “õ–∞–π—Ç—É</b></a>
    </div>
</div>

<script>
// --- PDF –§–ê–ô–õ–î–ê–†–´–ù–ê–ù –ê–õ–´–ù“í–ê–ù –°“∞–†–ê“ö–¢–ê–† ---
    // --- –§–£–ù–ö–¶–ò–Ø–õ–ê–† –ë–ê–ó–ê–°–´ (40 –°“∞–†–ê“ö) ---
const questionBank = [
    // --- 1. –ê–ù–´“ö–¢–ê–õ–£ –û–ë–õ–´–°–´ (D(y)) ---
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ –∞–Ω—ã“õ—Ç–∞–ª—É –æ–±–ª—ã—Å—ã–Ω —Ç–∞–±—ã“£—ã–∑: \\( y = \\sqrt{-x^2 + 7x - 10} \\)", options: ["[2; 5]", "(2; 5)", "[-5; -2]", "[0; 5]"], correct: 0 },
    { q: "–ê–Ω—ã“õ—Ç–∞–ª—É –æ–±–ª—ã—Å—ã–Ω —Ç–∞–±—ã“£—ã–∑: \\( y = \\frac{1}{x^2 - 4} \\)", options: ["x \\neq \\pm 2", "x \\neq 2", "(-2; 2)", "x > 2"], correct: 0 },
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ –∞–Ω—ã“õ—Ç–∞–ª—É –æ–±–ª—ã—Å—ã: \\( y = \\lg(x - 7) \\)", options: ["(7; +\\infty)", "[7; +\\infty)", "x \\neq 7", "(-\\infty; 7)"], correct: 0 },
    { q: "–ê–Ω—ã“õ—Ç–∞–ª—É –æ–±–ª—ã—Å—ã: \\( y = \\sqrt{x+3} + \\sqrt{5-x} \\)", options: ["[-3; 5]", "(-3; 5)", "[-5; 3]", "x \\geq -3"], correct: 0 },
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ –∞–Ω—ã“õ—Ç–∞–ª—É –æ–±–ª—ã—Å—ã: \\( y = \\frac{x}{\\sqrt{x^2-1}} \\)", options: ["(-\\infty; -1) \\cup (1; +\\infty)", "[-1; 1]", "x > 1", "x \\neq 1"], correct: 0 },

    // --- 2. –ú”ò–ù–î–ï–† –û–ë–õ–´–°–´ (E(y)) ---
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ –º”ô–Ω–¥–µ—Ä –æ–±–ª—ã—Å—ã–Ω —Ç–∞–±—ã“£—ã–∑: \\( y = |\\log_3 x| \\)", options: ["[0; +\\infty)", "R", "(0; +\\infty)", "[-1; 1]"], correct: 0 },
    { q: "–ú”ô–Ω–¥–µ—Ä –∂–∏—ã–Ω—ã–Ω —Ç–∞–±—ã“£—ã–∑: \\( y = 6\\sin x + 8\\cos x \\)", options: ["[-10; 10]", "[-1; 1]", "[-14; 14]", "[-5; 5]"], correct: 0 },
    { q: "\\( y = x^2 - 5x + 3 \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –º”ô–Ω–¥–µ—Ä –∂–∏—ã–Ω—ã:", options: ["[-3,25; +\\infty)", "[3; +\\infty)", "R", "[0; +\\infty)"], correct: 0 },
    { q: "\\( y = 2018x^3 - 1 \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –º”ô–Ω–¥–µ—Ä –æ–±–ª—ã—Å—ã:", options: ["(-\\infty; +\\infty)", "[-1; +\\infty)", "[2018; +\\infty)", "[0; +\\infty)"], correct: 0 },
    { q: "\\( y = 5^x + 7 \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –º”ô–Ω–¥–µ—Ä –∂–∏—ã–Ω—ã:", options: ["(7; +\\infty)", "[7; +\\infty)", "(0; +\\infty)", "R"], correct: 0 },

    // --- 3. –ö–ï–†–Ü –§–£–ù–ö–¶–ò–Ø (Inverse) ---
    { q: "\\( y = 6x + 14 \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω–∞ –∫–µ—Ä—ñ —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã —Ç–∞–±—ã“£—ã–∑:", options: ["y = \\frac{x-14}{6}", "y = \\frac{x+14}{6}", "y = 6x-14", "y = \\frac{1}{6}x+14"], correct: 0 },
    { q: "\\( y = \\frac{x-1}{x+2} \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω–∞ –∫–µ—Ä—ñ —Ñ—É–Ω–∫—Ü–∏—è:", options: ["y = \\frac{2x+1}{1-x}", "y = \\frac{x+2}{x-1}", "y = \\frac{1-x}{2x+1}", "y = x+2"], correct: 0 },
    { q: "\\( y = 3^x \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω–∞ –∫–µ—Ä—ñ —Ñ—É–Ω–∫—Ü–∏—è:", options: ["y = \\log_3 x", "y = x^3", "y = \\sqrt[3]{x}", "y = 3x"], correct: 0 },

    // --- 4. –ñ“∞–ü –ñ”ò–ù–ï –¢–ê“ö –§–£–ù–ö–¶–ò–Ø–õ–ê–† ---
    { q: "–¢”©–º–µ–Ω–¥–µ–≥—ñ–ª–µ—Ä–¥—ñ“£ “õ–∞–π—Å—ã—Å—ã —Ç–∞“õ —Ñ—É–Ω–∫—Ü–∏—è?", options: ["y = x^3 - x", "y = x^2 + x", "y = \\cos x", "y = |x|"], correct: 0 },
    { q: "–ñ“±–ø —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã –∞–Ω—ã“õ—Ç–∞“£—ã–∑:", options: ["y = x^4 + x^2", "y = x^3", "y = \\sin x", "y = 2x+1"], correct: 0 },
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ –∂“±–ø-—Ç–∞“õ—Ç—ã“ì—ã: \\( y = x \\cdot \\sin x \\)", options: ["–ñ“±–ø", "–¢–∞“õ", "–ñ“±–ø —Ç–∞ –µ–º–µ—Å, —Ç–∞“õ —Ç–∞ –µ–º–µ—Å", "–ü–µ—Ä–∏–æ–¥—Ç—ã"], correct: 0 },

    // --- 5. –¢–†–ò–ì–û–ù–û–ú–ï–¢–†–ò–Ø–õ–´“ö –§–£–ù–ö–¶–ò–Ø–õ–ê–† ---
    { q: "\\( y = \\text{ctg } x \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –µ“£ –∫—ñ—à—ñ –æ“£ –ø–µ—Ä–∏–æ–¥—ã:", options: ["\\pi", "2\\pi", "\\pi/2", "3\\pi"], correct: 0 },
    { q: "\\( y = \\sin 4x \\) –ø–µ—Ä–∏–æ–¥—ã–Ω —Ç–∞–±—ã“£—ã–∑:", options: ["\\pi / 2", "2\\pi", "\\pi", "4\\pi"], correct: 0 },
    { q: "\\( y = \\cos(2x - \\pi/3) \\) –µ“£ “Ø–ª–∫–µ–Ω –º”ô–Ω—ñ:", options: ["1", "2", "0", "1/2"], correct: 0 },

    // --- 6. –ì–†–ê–§–ò–ö–¢–ï–† –ñ”ò–ù–ï –ü–ê–†–ê–ë–û–õ–ê ---
    { q: "\\( y = (x+2)^2 - 1 \\) –ø–∞—Ä–∞–±–æ–ª–∞—Å—ã–Ω—ã“£ —Ç”©–±–µ—Å—ñ “õ–∞–π –Ω“Ø–∫—Ç–µ–¥–µ?", options: ["(-2; -1)", "(2; 1)", "(-2; 1)", "(2; -1)"], correct: 0 },
    { q: "–ü–∞—Ä–∞–±–æ–ª–∞ —Ç–∞—Ä–º–∞“õ—Ç–∞—Ä—ã —Ç”©–º–µ–Ω “õ–∞—Ä–∞“ì–∞–Ω (a < 0) –∂”ô–Ω–µ D < 0 –±–æ–ª—Å–∞:", options: ["–ì—Ä–∞—Ñ–∏–∫ –û—Ö –æ—Å—ñ–Ω “õ–∏–º–∞–π–¥—ã", "2 –Ω“Ø–∫—Ç–µ–¥–µ “õ–∏—è–¥—ã", "–¢”©–±–µ—Å—ñ –û—Ö –æ—Å—ñ–Ω–¥–µ –∂–∞—Ç—ã—Ä", "–¢–∞—Ä–º–∞“õ—Ç–∞—Ä—ã –∂–æ“ì–∞—Ä—ã"], correct: 0 },
    { q: "\\( y = -x^2 + 4 \\) –≥—Ä–∞—Ñ–∏–≥—ñ –û—Ö –æ—Å—ñ–Ω “õ–∞–π –Ω“Ø–∫—Ç–µ–ª–µ—Ä–¥–µ “õ–∏—è–¥—ã?", options: ["\\pm 2", "0; 4", "4", "–∂–æ“õ"], correct: 0 },

    // --- 7. –ö”®–†–°–ï–¢–ö–Ü–®–¢–Ü–ö –ñ”ò–ù–ï –õ–û–ì–ê–†–ò–§–ú–î–Ü–ö ---
    { q: "–ï–≥–µ—Ä \\( f(x) = a^x \\) –∂”ô–Ω–µ \\( f(2) = 1/16 \\) –±–æ–ª—Å–∞, \\( f(3) \\) —Ç–∞–±—ã“£—ã–∑:", options: ["1/64", "1/8", "1/32", "64"], correct: 0 },
    { q: "\\( f(x) = 2^x \\) –±–µ—Ä—ñ–ª–≥–µ–Ω. \\( \\frac{1}{2}f(3) \\) –º”ô–Ω—ñ–Ω —Ç–∞–±—ã“£—ã–∑:", options: ["4", "8", "16", "2"], correct: 0 },
    { q: "\\( y = \\log_2(x^2 + 4) \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –µ“£ –∫—ñ—à—ñ –º”ô–Ω—ñ:", options: ["2", "0", "4", "1"], correct: 0 },

    // --- 8. –ö“Æ–†–î–ï–õ–Ü –ñ”ò–ù–ï –¢–£–´–ù–î–´“í–ê –î–ê–ô–´–ù–î–´“ö ---
    { q: "\\( f(x) = x^2 - 1 \\) –±–æ–ª—Å–∞, \\( f(f(1)) \\) –Ω–µ–≥–µ —Ç–µ“£?", options: ["-1", "0", "1", "2"], correct: 0 },
    { q: "–°—ã–∑—ã“õ—Ç—ã“õ —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã —Ç–∞–±—ã“£—ã–∑:", options: ["y = 3x - 2", "y = x^2", "y = 1/x", "y = \\sqrt{x}"], correct: 0 },
    { q: "\\( y = 5 \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –≥—Ä–∞—Ñ–∏–≥—ñ:", options: ["–û—Ö –æ—Å—ñ–Ω–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å —Ç“Ø–∑—É", "–û—É –æ—Å—ñ–Ω–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å", "–ë–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞", "–ü–∞—Ä–∞–±–æ–ª–∞"], correct: 0 },

    // –¢–∞“ì—ã 12 —Å“±—Ä–∞“õ PDF –±–æ–π—ã–Ω—à–∞ “õ–æ—Å—ã–ª–¥—ã...
    { q: "–§—É–Ω–∫—Ü–∏—è–Ω—ã“£ –Ω”©–ª–¥–µ—Ä—ñ–Ω —Ç–∞–±—ã“£—ã–∑: \\( y = x^2 - 9 \\)", options: ["\\pm 3", "9", "0", "3"], correct: 0 },
    { q: "“ö–∞–π –Ω“Ø–∫—Ç–µ \\( y = 2x + 1 \\) –≥—Ä–∞—Ñ–∏–≥—ñ–Ω–µ —Ç–∏—ñ—Å—Ç—ñ?", options: ["(1; 3)", "(0; 0)", "(2; 4)", "(1; 2)"], correct: 0 },
    { q: "\\( y = \\sqrt[3]{x} \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –º”ô–Ω–¥–µ—Ä –∂–∏—ã–Ω—ã:", options: ["R", "[0; +\\infty)", "(0; +\\infty)", "[-1; 1]"], correct: 0 },
    { q: "\\( y = \\text{tg } x \\) –∞–Ω—ã“õ—Ç–∞–ª—É –æ–±–ª—ã—Å—ã:", options: ["x \\neq \\pi/2 + \\pi n", "x \\neq \\pi n", "R", "x > 0"], correct: 0 },
    { q: "–ö–µ—Ä—ñ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–¥—ã“õ —Ñ—É–Ω–∫—Ü–∏—è:", options: ["y = k/x", "y = kx", "y = ax^2", "y = x+b"], correct: 0 },
    { q: "\\( y = x^2 - 4x + 5 \\) –ø–∞—Ä–∞–±–æ–ª–∞—Å—ã–Ω—ã“£ —Ç”©–±–µ—Å—ñ–Ω—ñ“£ —Ö-—ñ:", options: ["2", "-2", "4", "0"], correct: 0 },
    { q: "\\( y = 3^{x-1} \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –≥—Ä–∞—Ñ–∏–≥—ñ “õ–∞–π –Ω“Ø–∫—Ç–µ –∞—Ä“õ—ã–ª—ã ”©—Ç–µ–¥—ñ?", options: ["(1; 1)", "(0; 0)", "(1; 3)", "(2; 1)"], correct: 0 },
    { q: "–ï–≥–µ—Ä \\( f(x) = 5x - 2 \\) –±–æ–ª—Å–∞, \\( f(-1) \\) —Ç–∞–±—ã“£—ã–∑:", options: ["-7", "-3", "3", "7"], correct: 0 },
    { q: "–¢–∞“õ —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã“£ –≥—Ä–∞—Ñ–∏–≥—ñ –Ω–µ–≥–µ “õ–∞—Ä–∞“ì–∞–Ω–¥–∞ —Å–∏–º–º–µ—Ç—Ä–∏—è–ª—ã?", options: ["–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–ª–∞—Ä –±–∞—Å—ã–Ω–∞", "–û—É –æ—Å—ñ–Ω–µ", "–û—Ö –æ—Å—ñ–Ω–µ", "y = x —Ç“Ø–∑—É—ñ–Ω–µ"], correct: 0 },
    { q: "–ñ“±–ø —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã“£ –≥—Ä–∞—Ñ–∏–≥—ñ –Ω–µ–≥–µ “õ–∞—Ä–∞“ì–∞–Ω–¥–∞ —Å–∏–º–º–µ—Ç—Ä–∏—è–ª—ã?", options: ["–û—É –æ—Å—ñ–Ω–µ", "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–ª–∞—Ä –±–∞—Å—ã–Ω–∞", "–û—Ö –æ—Å—ñ–Ω–µ", "y = 1 —Ç“Ø–∑—É—ñ–Ω–µ"], correct: 0 },
    { q: "\\( y = |x| \\) —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –µ“£ –∫—ñ—à—ñ –º”ô–Ω—ñ:", options: ["0", "-1", "–∂–æ“õ", "1"], correct: 0 },
    { q: "–§—É–Ω–∫—Ü–∏—è \\( y = -2x + 3 \\) “õ–∞–π —à–∏—Ä–µ–∫—Ç–µ—Ä –∞—Ä“õ—ã–ª—ã ”©—Ç–µ–¥—ñ?", options: ["I, II, IV", "I, III", "II, III, IV", "I, II, III"], correct: 0 }
];

// --- –õ–û–ì–ò–ö–ê (–ê—Ä–∞–ª–∞—Å—Ç—ã—Ä—É + –°–∞“õ—Ç–∞—É) ---
let currentQuestions = [];
let currentIndex = 0;
let score = 0;
let selectedOption = null;

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function initQuiz() {
    startNewQuiz();
}

function startNewQuiz() {
    const shuffledRaw = shuffleArray([...questionBank]);
    currentQuestions = shuffledRaw.map(q => {
        const correctAnswerText = q.options[q.correct];
        const shuffledOptions = shuffleArray([...q.options]);
        const newCorrectIndex = shuffledOptions.indexOf(correctAnswerText);
        return { q: q.q, options: shuffledOptions, correct: newCorrectIndex };
    });
    currentIndex = 0;
    score = 0;
    renderQuestion();
}

function renderQuestion() {
    const q = currentQuestions[currentIndex];
    const total = currentQuestions.length;
    document.getElementById('question-counter').innerText = `–°“±—Ä–∞“õ ${currentIndex + 1} / ${total}`;
    document.getElementById('score-counter').innerText = `–ë–∞–ª–ª: ${score}`;
    document.getElementById('progress-fill').style.width = `${((currentIndex) / total) * 100}%`;
    document.getElementById('question-text').innerHTML = q.q;

    const container = document.getElementById('options-container');
    container.innerHTML = '';
    q.options.forEach((opt, idx) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerHTML = `\\(${opt}\\)`;
        btn.onclick = () => selectAnswer(btn, idx);
        container.appendChild(btn);
    });

    document.getElementById('next-btn').style.display = 'none';
    selectedOption = null;
    MathJax.typeset();
}

function selectAnswer(btn, index) {
    if (selectedOption !== null) return;
    selectedOption = index;
    const q = currentQuestions[currentIndex];
    const buttons = document.querySelectorAll('.option-btn');
    if (index === q.correct) {
        btn.classList.add('correct');
        score++;
    } else {
        btn.classList.add('wrong');
        buttons[q.correct].classList.add('correct');
    }
    document.getElementById('next-btn').style.display = 'block';
}

function nextQuestion() {
    currentIndex++;
    if (currentIndex < currentQuestions.length) {
        renderQuestion();
    } else {
        finishQuiz();
    }
}

function finishQuiz() {
    document.getElementById('quiz-screen').style.display = 'none';
    const resScreen = document.getElementById('result-screen');
    resScreen.style.display = 'block';
    document.getElementById('final-score').innerText = `${score} / ${currentQuestions.length}`;
    
    let msg = score > 15 ? "üî• –§—É–Ω–∫—Ü–∏—è–ª–∞—Ä–¥—ã“£ —à–µ–±–µ—Ä—ñ—Å—ñ“£!" : "üìö –ì—Ä–∞—Ñ–∏–∫—Ç–µ—Ä–¥—ñ “õ–∞–π—Ç–∞–ª–∞—É –∫–µ—Ä–µ–∫!";
    document.getElementById('motivation-text').innerText = msg;
}

function resetQuiz() {
    document.getElementById('result-screen').style.display = 'none';
    document.getElementById('quiz-screen').style.display = 'block';
    startNewQuiz();
}

window.onload = initQuiz;
</script>
</body>
</html>